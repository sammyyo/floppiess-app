{"remainingRequest":"/opt/lampp/htdocs/FLOPPIESS/floppiess-app/node_modules/babel-loader/lib/index.js!/opt/lampp/htdocs/FLOPPIESS/floppiess-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/opt/lampp/htdocs/FLOPPIESS/floppiess-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/opt/lampp/htdocs/FLOPPIESS/floppiess-app/src/components/modal/Checkout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/opt/lampp/htdocs/FLOPPIESS/floppiess-app/src/components/modal/Checkout.vue","mtime":1568549127997},{"path":"/opt/lampp/htdocs/FLOPPIESS/floppiess-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/FLOPPIESS/floppiess-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/FLOPPIESS/floppiess-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/FLOPPIESS/floppiess-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'checkout',\n  data: function data() {\n    return {\n      modalTitle: 'Checkout',\n      removeLabel: 'Remove from cart',\n      cartEmptyLabel: 'Your cart is empty',\n      closeLabel: 'Close',\n      isCheckoutSection: false\n    };\n  },\n  computed: {\n    products: function products() {\n      return this.$store.getters.productsAdded;\n    },\n    openModal: function openModal() {\n      if (this.$store.getters.isCheckoutModalOpen) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    buyLabel: function buyLabel() {\n      var totalProducts = this.products.length,\n          productsAdded = this.$store.getters.productsAdded,\n          pricesArray = [],\n          productLabel = '',\n          finalPrice = '',\n          quantity = 1;\n      productsAdded.forEach(function (product) {\n        if (product.quantity >= 1) {\n          quantity = product.quantity;\n        }\n\n        pricesArray.push(product.price * quantity); // get the price of every product added and multiply quantity\n      });\n      finalPrice = pricesArray.reduce(function (a, b) {\n        return a + b;\n      }, 0); // sum the prices\n\n      if (totalProducts > 1) {\n        // set plural or singular\n        productLabel = 'products';\n      } else {\n        productLabel = 'product';\n      }\n\n      return \"Buy \".concat(totalProducts, \" \").concat(productLabel, \" at \").concat(finalPrice, \"\\u20AC\");\n    },\n    isUserLoggedIn: function isUserLoggedIn() {\n      return this.$store.getters.isUserLoggedIn;\n    }\n  },\n  methods: {\n    closeModal: function closeModal(reloadPage) {\n      this.$store.commit('showCheckoutModal', false);\n\n      if (reloadPage) {\n        window.location.reload();\n      }\n    },\n    removeFromCart: function removeFromCart(id) {\n      var data = {\n        id: id,\n        status: false\n      };\n      this.$store.commit('removeFromCart', id);\n      this.$store.commit('setAddedBtn', data);\n    },\n    onNextBtn: function onNextBtn() {\n      if (this.isUserLoggedIn) {\n        this.isCheckoutSection = true;\n      } else {\n        this.$store.commit('showCheckoutModal', false);\n        this.$store.commit('showLoginModal', true);\n      }\n    },\n    onPrevBtn: function onPrevBtn() {\n      this.isCheckoutSection = false;\n    }\n  }\n};",{"version":3,"sources":["Checkout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,UADA;AAEA,MAAA,WAAA,EAAA,kBAFA;AAGA,MAAA,cAAA,EAAA,oBAHA;AAIA,MAAA,UAAA,EAAA,OAJA;AAKA,MAAA,iBAAA,EAAA;AALA,KAAA;AAOA,GAXA;AAYA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,aAAA;AACA,KAHA;AAIA,IAAA,SAJA,uBAIA;AACA,UAAA,KAAA,MAAA,CAAA,OAAA,CAAA,mBAAA,EAAA;AACA,eAAA,IAAA;AACA,OAFA,MAEA;AACA,eAAA,KAAA;AACA;AACA,KAVA;AAWA,IAAA,QAXA,sBAWA;AACA,UAAA,aAAA,GAAA,KAAA,QAAA,CAAA,MAAA;AAAA,UACA,aAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,aADA;AAAA,UAEA,WAAA,GAAA,EAFA;AAAA,UAGA,YAAA,GAAA,EAHA;AAAA,UAIA,UAAA,GAAA,EAJA;AAAA,UAKA,QAAA,GAAA,CALA;AAMA,MAAA,aAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,YAAA,OAAA,CAAA,QAAA,IAAA,CAAA,EAAA;AACA,UAAA,QAAA,GAAA,OAAA,CAAA,QAAA;AACA;;AACA,QAAA,WAAA,CAAA,IAAA,CAAA,OAAA,CAAA,KAAA,GAAA,QAAA,EAJA,CAIA;AACA,OALA;AAMA,MAAA,UAAA,GAAA,WAAA,CAAA,MAAA,CAAA,UAAA,CAAA,EAAA,CAAA;AAAA,eAAA,CAAA,GAAA,CAAA;AAAA,OAAA,EAAA,CAAA,CAAA,CAbA,CAaA;;AAEA,UAAA,aAAA,GAAA,CAAA,EAAA;AAAA;AACA,QAAA,YAAA,GAAA,UAAA;AACA,OAFA,MAEA;AACA,QAAA,YAAA,GAAA,SAAA;AACA;;AACA,2BAAA,aAAA,cAAA,YAAA,iBAAA,UAAA;AACA,KAhCA;AAiCA,IAAA,cAjCA,4BAiCA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,cAAA;AACA;AAnCA,GAZA;AAiDA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,UADA,EACA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,mBAAA,EAAA,KAAA;;AACA,UAAA,UAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA;AACA,KANA;AAOA,IAAA,cAPA,0BAOA,EAPA,EAOA;AACA,UAAA,IAAA,GAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA;AAFA,OAAA;AAIA,WAAA,MAAA,CAAA,MAAA,CAAA,gBAAA,EAAA,EAAA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,IAAA;AACA,KAdA;AAeA,IAAA,SAfA,uBAeA;AACA,UAAA,KAAA,cAAA,EAAA;AACA,aAAA,iBAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,mBAAA,EAAA,KAAA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,gBAAA,EAAA,IAAA;AACA;AACA,KAtBA;AAuBA,IAAA,SAvBA,uBAuBA;AACA,WAAA,iBAAA,GAAA,KAAA;AACA;AAzBA;AAjDA,CAAA","sourcesContent":["<template>\n\t<div :class=\"[ openModal ? 'is-active' : '', 'modal' ]\">\n\t\t<div class=\"modal-background\"></div>\n\t\t<div class=\"modal-card\">\n\t\t\t<header class=\"modal-card-head\">\n\t\t\t\t<p class=\"modal-card-title\">{{ modalTitle }}</p>\n\t\t\t\t<button class=\"delete\" aria-label=\"close\" @click=\"closeModal(false)\"></button>\n\t\t\t</header>\n\t\t\t<section class=\"modal-card-body\">\n\t\t\t\t<div v-if=\"!isCheckoutSection\">\n\t\t\t\t\t<div class=\"box\" v-for=\"product in products\" :key=\"product.id\">\n\t\t\t\t\t\t<button class=\"is-pulled-right button is-info is-inverted\" @click=\"removeFromCart(product.id)\">{{ removeLabel }}</button>\n\t\t\t\t\t\t<p>{{ product.title }}  {{ product.quantity > 0 ?  ` - Quantity: ${product.quantity}` : ''}}</p>\n\t\t\t\t\t\t<p>{{ product.price }} &euro;</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"products.length === 0\">\n\t\t\t\t\t\t<p>{{ cartEmptyLabel }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"isCheckoutSection\">\n\t\t\t\t\t<p>You bought it :-)</p>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<footer class=\"modal-card-foot\">\n\t\t\t\t<button v-show=\"products.length > 0 && !isCheckoutSection\" class=\"button is-success\" @click=\"onNextBtn\">{{ buyLabel }}</button>\n\t\t\t\t<button v-if=\"isCheckoutSection\" class=\"button is-success\" @click=\"closeModal(true)\">{{ closeLabel }}</button>\n\t\t\t</footer>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'checkout',\n    \n\tdata () {\n\t\treturn {\n\t\t\tmodalTitle: 'Checkout',\n\t\t\tremoveLabel: 'Remove from cart',\n\t\t\tcartEmptyLabel: 'Your cart is empty',\n\t\t\tcloseLabel: 'Close',\n\t\t\tisCheckoutSection: false\n\t\t}\n\t},\n\tcomputed: {\n\t\t\tproducts () {\n\t\t\t\treturn this.$store.getters.productsAdded;\n\t\t\t},\n\t\t\topenModal () {\n\t\t\t\tif (this.$store.getters.isCheckoutModalOpen) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuyLabel () {\n\t\t\t\tlet totalProducts = this.products.length,\n\t\t\t\t\t\tproductsAdded = this.$store.getters.productsAdded,\n\t\t\t\t\t\tpricesArray = [],\n\t\t\t\t\t\tproductLabel = '',\n\t\t\t\t\t\tfinalPrice = '',\n\t\t\t\t\t\tquantity = 1;\n\t\t\t\tproductsAdded.forEach(product => {\n\t\t\t\t\tif (product.quantity >= 1) {\n\t\t\t\t\t\tquantity = product.quantity;\n\t\t\t\t\t}\n\t\t\t\t\tpricesArray.push((product.price * quantity)); // get the price of every product added and multiply quantity\n\t\t\t\t});\n\t\t\t\tfinalPrice = pricesArray.reduce((a, b) => a + b, 0); // sum the prices\n\t\t\t\t\n\t\t\t\tif (totalProducts > 1) { // set plural or singular\n\t\t\t\t\tproductLabel = 'products';\n\t\t\t\t} else {\n\t\t\t\t\tproductLabel = 'product';\n\t\t\t\t}\n\t\t\t\treturn `Buy ${totalProducts} ${productLabel} at ${finalPrice}â‚¬`;\n\t\t},\n\t\tisUserLoggedIn () {\n\t\t\treturn this.$store.getters.isUserLoggedIn;\n\t\t}\n\t},\n\tmethods: {\n\t\tcloseModal (reloadPage) {\n\t\t\tthis.$store.commit('showCheckoutModal', false);\n\t\t\tif (reloadPage) {\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t},\n\t\tremoveFromCart (id) {\n\t\t\tlet data = {\n\t\t\t\t\tid: id,\n\t\t\t\t\tstatus: false\n\t\t\t}\n\t\t\tthis.$store.commit('removeFromCart', id);\n\t\t\tthis.$store.commit('setAddedBtn', data);\n\t\t},\n\t\tonNextBtn () {\n\t\t\tif (this.isUserLoggedIn) {\n\t\t\t\tthis.isCheckoutSection = true;\n\t\t\t} else {\n\t\t\t\tthis.$store.commit('showCheckoutModal', false);\n\t\t\t\tthis.$store.commit('showLoginModal', true);\n\t\t\t}\n\t\t},\n\t\tonPrevBtn () {\n\t\t\tthis.isCheckoutSection = false;\n\t\t}\n\t}\n}\n</script>"],"sourceRoot":"src/components/modal"}]}